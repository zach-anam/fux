{"version":3,"file":"action.js","sourceRoot":"","sources":["action.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright 2022 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport '../../../focus/focus-ring.js';\nimport '../../../ripple/ripple.js';\n\nimport {html, TemplateResult} from 'lit';\nimport {property, query, state} from 'lit/decorators.js';\nimport {ClassInfo, classMap} from 'lit/directives/class-map.js';\n\nimport {ActionElement, BeginPressConfig, EndPressConfig} from '../../../actionelement/action-element.js';\nimport {ariaProperty} from '../../../decorators/aria-property.js';\nimport {pointerPress, shouldShowStrongFocus} from '../../../focus/strong-focus.js';\nimport {MdRipple} from '../../../ripple/ripple.js';\n\nimport {Md3ChipActionEventType} from './events.js';\n\n/**\n * Base class for all actions.\n * @soyCompatible\n */\nexport abstract class Action extends ActionElement {\n  @property({type: Boolean, reflect: true}) isDeletable = false;\n\n  @property({type: Boolean, reflect: true}) isFocusable = false;\n\n  @property({type: Boolean, reflect: true}) isTouchable = false;\n\n  @property({type: Boolean, reflect: true}) disabled = false;\n\n  @state() showFocusRing = false;\n\n  @query('md-ripple') ripple?: MdRipple|null;\n\n  /** @soyPrefixAttribute */\n  @ariaProperty  // tslint:disable-line:no-new-decorators\n  @property({type: String, attribute: 'aria-label'})\n  override ariaLabel!: string;\n\n  /** @soyTemplate */\n  protected getRootClasses(): ClassInfo {\n    return {\n      'md3-chip__action': true,\n    };\n  }\n\n  /** @soyTemplate */\n  protected getRippleClasses(): ClassInfo {\n    return {\n      'md3-chip__ripple': true,\n    };\n  }\n\n  /** @soyTemplate */\n  protected renderTouchTarget(): TemplateResult {\n    return this.isTouchable ?\n        html`<span class=\"md3-chip__action-touch\"></span>` :\n        html``;\n  }\n\n  /** @soyTemplate */\n  protected renderRipple(): TemplateResult {\n    return html`\n      <md-ripple class=\"${classMap(this.getRippleClasses())}\"\n          ?disabled=\"${this.disabled}\">\n      </md-ripple>`;\n  }\n\n  /** @soyTemplate */\n  protected renderFocusRing(): TemplateResult {\n    return html`\n      <md-focus-ring .visible=\"${this.showFocusRing}\"></md-focus-ring>`;\n  }\n\n  protected handleFocus() {\n    this.showFocusRing = shouldShowStrongFocus();\n  }\n\n  protected handleBlur() {\n    this.showFocusRing = false;\n  }\n\n  override beginPress({positionEvent}: BeginPressConfig) {\n    this.ripple?.beginPress(positionEvent);\n  }\n\n  override endPress(options: EndPressConfig) {\n    super.endPress(options);\n    this.ripple?.endPress();\n    if (!options.cancelled) {\n      this.dispatchCustomEvent(this.getInteractionEvent());\n    }\n  }\n\n  protected handlePointerEnter(e: PointerEvent) {\n    this.ripple?.beginHover(e);\n  }\n\n  override handlePointerLeave(e: PointerEvent) {\n    super.handlePointerLeave(e);\n    this.ripple?.endHover();\n  }\n\n  override handlePointerDown(e: PointerEvent) {\n    super.handlePointerDown(e);\n    pointerPress();\n    this.showFocusRing = shouldShowStrongFocus();\n  }\n\n  override handleClick(e: MouseEvent) {\n    super.handleClick(e);\n    this.dispatchCustomEvent(this.getInteractionEvent());\n  }\n\n  protected handleKeyDown(e: KeyboardEvent) {\n    switch (e.key) {\n      case 'Enter':\n      case ' ':\n        this.dispatchCustomEvent(this.getInteractionEvent());\n        break;\n      case 'Delete':\n      case 'Backspace':\n        if (this.isDeletable) {\n          this.dispatchCustomEvent(Md3ChipActionEventType.DELETE);\n        }\n        break;\n      case 'ArrowLeft':\n        this.dispatchCustomEvent(\n            this.isRTL() ? Md3ChipActionEventType.NAVIGATE_TO_NEXT :\n                           Md3ChipActionEventType.NAVIGATE_TO_PREV);\n        break;\n      case 'ArrowRight':\n        this.dispatchCustomEvent(\n            this.isRTL() ? Md3ChipActionEventType.NAVIGATE_TO_PREV :\n                           Md3ChipActionEventType.NAVIGATE_TO_NEXT);\n        break;\n      case 'Home':\n        this.dispatchCustomEvent(Md3ChipActionEventType.NAVIGATE_TO_FIRST);\n        break;\n      case 'End':\n        this.dispatchCustomEvent(Md3ChipActionEventType.NAVIGATE_TO_LAST);\n        break;\n      default:\n        // Unhandled key, do nothing.\n    }\n  }\n\n  protected getInteractionEvent(): string {\n    return Md3ChipActionEventType.SELECT;\n  }\n\n  private dispatchCustomEvent(eventType: string) {\n    this.dispatchEvent(\n        new CustomEvent(eventType, {bubbles: true, composed: true}));\n  }\n\n  private isRTL(): boolean {\n    return getComputedStyle(this).getPropertyValue('direction') === 'rtl';\n  }\n}\n"]}